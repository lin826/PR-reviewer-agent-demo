diff --git a/sphinx/domains/python.py b/sphinx/domains/python.py
index f44a82b..d452039 100644
--- a/sphinx/domains/python.py
+++ b/sphinx/domains/python.py
@@ -271,8 +271,18 @@ class PyXrefMixin:
                   contnode: Node = None, env: BuildEnvironment = None) -> Node:
         result = super().make_xref(rolename, domain, target,  # type: ignore
                                    innernode, contnode, env)
+
         result['refspecific'] = True
+        # Propagate current module and class context to the pending_xref node
+        if env is not None:
+            module = env.ref_context.get('py:module')
+            if module and 'py:module' not in result:
+                result['py:module'] = module
+            clsname = env.ref_context.get('py:class')
+            if clsname and 'py:class' not in result:
+                result['py:class'] = clsname
         if target.startswith(('.', '~')):
+
             prefix, result['reftarget'] = target[0], target[1:]
             if prefix == '.':
                 text = target[1:]
