diff --git a/django/db/models/query.py b/django/db/models/query.py
index b48d0df9c0..776079c0f1 100644
--- a/django/db/models/query.py
+++ b/django/db/models/query.py
@@ -211,6 +211,16 @@ class QuerySet:
     @query.setter
     def query(self, value):
         self._query = value
+        # Clear the result cache to avoid inconsistencies
+        self._result_cache = None
+        # If the query has values_select set (from .values() or .values_list()),
+        # but the current iterable class is the default (ModelIterable),
+        # then switch to the appropriate iterable class to avoid crashes when
+        # unpickling a query from a values() queryset.
+        if value.values_select and self._iterable_class is ModelIterable:
+            self._iterable_class = ValuesIterable
+            # Set _fields based on the query's values_select and annotation_select
+            self._fields = tuple(value.values_select) + tuple(value.annotation_select)
 
     def as_manager(cls):
         # Address the circular dependency between `Queryset` and `Manager`.
